const fs = require('fs');

const path = require('path');

module.exports = dirpath => {
  const result = [];
  const files = [dirpath];

  do {
    const filepath = files.pop();
    const stat = fs.lstatSync(filepath);

    if (stat.isDirectory()) {
      fs.readdirSync(filepath).forEach(f => files.push(path.join(filepath, f)));
    } else if (stat.isFile()) {
      result.push(path.relative(dirpath, filepath));
    }
  } while (files.length !== 0);

  return result;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9sb2dpYy93YWxrLWRpci5qcyJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwibW9kdWxlIiwiZXhwb3J0cyIsImRpcnBhdGgiLCJyZXN1bHQiLCJmaWxlcyIsImZpbGVwYXRoIiwicG9wIiwic3RhdCIsImxzdGF0U3luYyIsImlzRGlyZWN0b3J5IiwicmVhZGRpclN5bmMiLCJmb3JFYWNoIiwiZiIsInB1c2giLCJqb2luIiwiaXNGaWxlIiwicmVsYXRpdmUiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUQsQ0FBbEI7O0FBQ0EsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFwQjs7QUFFQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWtCQyxPQUFELElBQWE7QUFDNUIsUUFBTUMsTUFBTSxHQUFHLEVBQWY7QUFFQSxRQUFNQyxLQUFLLEdBQUcsQ0FBQ0YsT0FBRCxDQUFkOztBQUNBLEtBQUc7QUFDRCxVQUFNRyxRQUFRLEdBQUdELEtBQUssQ0FBQ0UsR0FBTixFQUFqQjtBQUNBLFVBQU1DLElBQUksR0FBR1YsRUFBRSxDQUFDVyxTQUFILENBQWFILFFBQWIsQ0FBYjs7QUFDQSxRQUFJRSxJQUFJLENBQUNFLFdBQUwsRUFBSixFQUF3QjtBQUN0QlosTUFBQUEsRUFBRSxDQUNDYSxXQURILENBQ2VMLFFBRGYsRUFFR00sT0FGSCxDQUVZQyxDQUFELElBQU9SLEtBQUssQ0FBQ1MsSUFBTixDQUFXZCxJQUFJLENBQUNlLElBQUwsQ0FBVVQsUUFBVixFQUFvQk8sQ0FBcEIsQ0FBWCxDQUZsQjtBQUdELEtBSkQsTUFJTyxJQUFJTCxJQUFJLENBQUNRLE1BQUwsRUFBSixFQUFtQjtBQUN4QlosTUFBQUEsTUFBTSxDQUFDVSxJQUFQLENBQVlkLElBQUksQ0FBQ2lCLFFBQUwsQ0FBY2QsT0FBZCxFQUF1QkcsUUFBdkIsQ0FBWjtBQUNEO0FBQ0YsR0FWRCxRQVVTRCxLQUFLLENBQUNhLE1BQU4sS0FBaUIsQ0FWMUI7O0FBWUEsU0FBT2QsTUFBUDtBQUNELENBakJEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoZGlycGF0aCkgPT4ge1xuICBjb25zdCByZXN1bHQgPSBbXTtcblxuICBjb25zdCBmaWxlcyA9IFtkaXJwYXRoXTtcbiAgZG8ge1xuICAgIGNvbnN0IGZpbGVwYXRoID0gZmlsZXMucG9wKCk7XG4gICAgY29uc3Qgc3RhdCA9IGZzLmxzdGF0U3luYyhmaWxlcGF0aCk7XG4gICAgaWYgKHN0YXQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgZnNcbiAgICAgICAgLnJlYWRkaXJTeW5jKGZpbGVwYXRoKVxuICAgICAgICAuZm9yRWFjaCgoZikgPT4gZmlsZXMucHVzaChwYXRoLmpvaW4oZmlsZXBhdGgsIGYpKSk7XG4gICAgfSBlbHNlIGlmIChzdGF0LmlzRmlsZSgpKSB7XG4gICAgICByZXN1bHQucHVzaChwYXRoLnJlbGF0aXZlKGRpcnBhdGgsIGZpbGVwYXRoKSk7XG4gICAgfVxuICB9IHdoaWxlIChmaWxlcy5sZW5ndGggIT09IDApO1xuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuIl19