const assert = require('assert');

const Joi = require('joi-strict');

const tk = require('timekeeper');

module.exports = opts => {
  Joi.assert(opts, Joi.object().keys({
    unix: Joi.number()
  }), 'Invalid Options Provided');
  return {
    inject: () => {
      assert(tk.isKeepingTime() === false);
      tk.freeze(new Date(opts.unix * 1000));
    },
    release: () => {
      assert(tk.isKeepingTime());
      tk.reset();
    },
    isInjected: () => tk.isKeepingTime()
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2R1bGVzL3RpbWUta2VlcGVyLmpzIl0sIm5hbWVzIjpbImFzc2VydCIsInJlcXVpcmUiLCJKb2kiLCJ0ayIsIm1vZHVsZSIsImV4cG9ydHMiLCJvcHRzIiwib2JqZWN0Iiwia2V5cyIsInVuaXgiLCJudW1iZXIiLCJpbmplY3QiLCJpc0tlZXBpbmdUaW1lIiwiZnJlZXplIiwiRGF0ZSIsInJlbGVhc2UiLCJyZXNldCIsImlzSW5qZWN0ZWQiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBdEI7O0FBQ0EsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsWUFBRCxDQUFuQjs7QUFDQSxNQUFNRSxFQUFFLEdBQUdGLE9BQU8sQ0FBQyxZQUFELENBQWxCOztBQUVBRyxNQUFNLENBQUNDLE9BQVAsR0FBa0JDLElBQUQsSUFBVTtBQUN6QkosRUFBQUEsR0FBRyxDQUFDRixNQUFKLENBQVdNLElBQVgsRUFBaUJKLEdBQUcsQ0FBQ0ssTUFBSixHQUFhQyxJQUFiLENBQWtCO0FBQ2pDQyxJQUFBQSxJQUFJLEVBQUVQLEdBQUcsQ0FBQ1EsTUFBSjtBQUQyQixHQUFsQixDQUFqQixFQUVJLDBCQUZKO0FBR0EsU0FBTztBQUNMQyxJQUFBQSxNQUFNLEVBQUUsTUFBTTtBQUNaWCxNQUFBQSxNQUFNLENBQUNHLEVBQUUsQ0FBQ1MsYUFBSCxPQUF1QixLQUF4QixDQUFOO0FBQ0FULE1BQUFBLEVBQUUsQ0FBQ1UsTUFBSCxDQUFVLElBQUlDLElBQUosQ0FBU1IsSUFBSSxDQUFDRyxJQUFMLEdBQVksSUFBckIsQ0FBVjtBQUNELEtBSkk7QUFLTE0sSUFBQUEsT0FBTyxFQUFFLE1BQU07QUFDYmYsTUFBQUEsTUFBTSxDQUFDRyxFQUFFLENBQUNTLGFBQUgsRUFBRCxDQUFOO0FBQ0FULE1BQUFBLEVBQUUsQ0FBQ2EsS0FBSDtBQUNELEtBUkk7QUFTTEMsSUFBQUEsVUFBVSxFQUFFLE1BQU1kLEVBQUUsQ0FBQ1MsYUFBSDtBQVRiLEdBQVA7QUFXRCxDQWZEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0Jyk7XG5jb25zdCBKb2kgPSByZXF1aXJlKCdqb2ktc3RyaWN0Jyk7XG5jb25zdCB0ayA9IHJlcXVpcmUoJ3RpbWVrZWVwZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSAob3B0cykgPT4ge1xuICBKb2kuYXNzZXJ0KG9wdHMsIEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICB1bml4OiBKb2kubnVtYmVyKClcbiAgfSksICdJbnZhbGlkIE9wdGlvbnMgUHJvdmlkZWQnKTtcbiAgcmV0dXJuIHtcbiAgICBpbmplY3Q6ICgpID0+IHtcbiAgICAgIGFzc2VydCh0ay5pc0tlZXBpbmdUaW1lKCkgPT09IGZhbHNlKTtcbiAgICAgIHRrLmZyZWV6ZShuZXcgRGF0ZShvcHRzLnVuaXggKiAxMDAwKSk7XG4gICAgfSxcbiAgICByZWxlYXNlOiAoKSA9PiB7XG4gICAgICBhc3NlcnQodGsuaXNLZWVwaW5nVGltZSgpKTtcbiAgICAgIHRrLnJlc2V0KCk7XG4gICAgfSxcbiAgICBpc0luamVjdGVkOiAoKSA9PiB0ay5pc0tlZXBpbmdUaW1lKClcbiAgfTtcbn07XG4iXX0=